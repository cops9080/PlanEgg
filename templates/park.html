<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>광장</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/park.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="park-container">

        <a href="{{ url_for('home') }}" class="top-btn back-btn">
            <div class="icon-circle">
                <i class="fa-solid fa-arrow-left"></i>
            </div>
        </a>

        <div class="top-right-group">
            <a href="{{ url_for('ranking') }}" class="top-btn stats-btn">
                <div class="icon-circle">
                    <i class="fa-solid fa-chart-simple"></i>
                </div>
            </a>
            <div class="top-btn share-btn">
                <div class="icon-circle">
                    <i class="fa-solid fa-share-nodes"></i>
                </div>
            </div>
            <div class="top-btn add-friend-btn">
                <div class="icon-circle">
                    <i class="fa-solid fa-user-plus"></i>
                </div>
            </div>
        </div>

        <img class="deco-tree-left"
            src="{{ url_for('static', filename='images/park/image-removebg-preview (8) 1.png') }}" />
        <img class="deco-tree-right"
            src="{{ url_for('static', filename='images/park/image-removebg-preview (8) 2.png') }}" />
        <a href="{{ url_for('market') }}" class="deco-shop">
            <img src="{{ url_for('static', filename='images/park/ㄹㅇ상점 1.png') }}"
                style="width: 100%; display: block;" />
            <div class="name-tag">상점</div>
        </a>


        <a href="{{ url_for('user', name='멍이') }}" class="char-group char-dog">
            <div class="speech-bubble">
                <span class="emoji">📝</span> 공부 중이에요!
            </div>
            <img class="char-img"
                src="{{ url_for('static', filename='images/park/dreamina-2025-11-08-8642-Using image 1 as a reference, change the...-Photoroom 1.png') }}"
                alt="멍이">
            <div class="name-tag">멍이</div>
            <div class="shadow"></div>
        </a>

        <a href="{{ url_for('user', name='냥이') }}" class="char-group char-cat">
            <div class="speech-bubble">
                chill한 기분이에요
            </div>
            <img class="char-img" src="{{ url_for('static', filename='images/park/image 1.png') }}" alt="냥이">
            <div class="name-tag">냥이</div>
            <div class="shadow"></div>
        </a>

        <a href="{{ url_for('user', name='포포') }}" class="char-group char-ghost">
            <div class="speech-bubble">
                아무 생각이 없어요
            </div>
            <img class="char-img"
                src="{{ url_for('static', filename='images/park/dreamina-2025-11-05-3975-Edit Image 1, remove the hat, and change...-Photoroom 1.png') }}"
                alt="포포">
            <div class="name-tag">포포</div>
            <div class="shadow"></div>
        </a>


        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="{{ url_for('home') }}" class="nav-item">
                <div class="nav-icon-wrapper">
                    <i class="fa-solid fa-house"></i>
                </div>
                <span>홈</span>
            </a>

            <a href="{{ url_for('questlist') }}" class="nav-item">
                <div class="nav-icon-wrapper">
                    <i class="fa-solid fa-list-check"></i>
                </div>
                <span>TO-DO</span>
            </a>

            <div class="nav-item-fab-wrapper">
                <a href="{{ url_for('quest') }}" class="fab-btn">
                    <i class="fa-solid fa-plus"></i>
                </a>
            </div>
            <a href="{{ url_for('park') }}" class="nav-item active">
                <div class="nav-icon-wrapper">
                    <i class="fa-solid fa-user-group"></i>
                </div>
                <span>친구</span>
            </a>
            <a href="{{ url_for('ranking') }}" class="nav-item">
                <div class="nav-icon-wrapper">
                    <i class="fa-solid fa-trophy"></i>
                </div>
                <span>랭킹</span>
            </a>
        </nav>

    </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal-content">
            <div class="modal-title">설정</div>
            <button class="modal-btn btn-reset" onclick="resetData()">데이터 초기화</button>
            <button class="modal-btn btn-close" onclick="closeSettings()">닫기</button>
        </div>
    </div>

    <script>
        const settingsBtn = document.querySelector('.nav-settings');
        const modal = document.getElementById('settingsModal');

        console.log('Settings Button:', settingsBtn);
        console.log('Modal:', modal);

        if (settingsBtn) {
            settingsBtn.addEventListener('click', () => {
                console.log('Settings button clicked');
                modal.style.display = 'flex';
            });
        } else {
            console.error('Settings button not found');
        }

        function closeSettings() {
            modal.style.display = 'none';
        }

        function resetData() {
            if (confirm('정말로 모든 데이터를 초기화하시겠습니까? 이 작업은 되돌릴 수 없습니다.')) {
                fetch('/reset_db', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                    .then(response => response.json())
                    .then(data => {
                        alert(data.message);
                        location.reload(); // Reload to reflect changes
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('오류가 발생했습니다.');
                    });
            }
        }
    </script>
</body>

</html>